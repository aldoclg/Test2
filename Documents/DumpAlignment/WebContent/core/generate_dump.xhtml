<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
      
     <h:head>	
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta http-equiv="refresh" content="#{session.maxInactiveInterval};url=#{request.contextPath}/logout.xhtml?type=timeout" />            
        <h:outputStylesheet name="header.css" library="css" />
        <h:outputStylesheet name="generateDump.css" library="css" /> 
        <h:outputScript name="generate_dump.js"  library="js" /> 
        <h:outputScript name="jquery/jquery-plugins.js" library="primefaces"/>
                
        <title>Dump Alignment</title>             
    </h:head> 
    <h:body onload="loadListener();">       
    	<p:layout fullPage="true" id="layout" >
        	<p:layoutUnit position="north" visible="true" resizable="true" collapsible="true" >
           		<ui:insert name="header">
           			<ui:include src="/template/header.xhtml" />
           		</ui:insert>
           </p:layoutUnit>
           <p:layoutUnit position="center" resizable="true" visible="true" collapsible="true" >
           
           		<h:form id="formTable" prependId="false"> 
           		
           			<p:remoteCommand name="loadListener" process="@this" actionListener="#{generateDumpBean.init()}" immediate="true" />
           			
           			<div class="scrollClass">
           			<p:scrollPanel id="scrollTable" mode="native">
           		
	           			<p:dataTable id="tableResult" var="r" value="#{generateDumpBean.resultTable}"  
	           				selection="#{generateDumpBean.selectedRow}"	           				
	           				rowKey="#{r.correctionID}"
	           				rowStyleClass="oddColumn, evenColumn"
	           				draggableRows="true"	           				
	           				selectionMode="single"
	           				>	     
	           				      			
	           				<p:ajax event="rowReorder" listener="#{generateDumpBean.onRowReoder}" update=":formTable:tableResult"/>
	           					           				
	           				<p:column headerText="Correction" filterBy="#{r.correctionID}" filterMatchMode="contains" width="10%">
	           					<p:selectBooleanCheckbox id="checkLoad" value="#{r.load}" />
	           					<p:tooltip id="tooltipLoad" for="checkLoad" value="Uncheck whether you do not wish load up the correction" trackMouse="true" />      					
	       						<h:outputLink value="https://mhweb.ericsson.se/mhweb/servlet/servletCorrView?corrid=#{r.correctionID}">
	       							<h:outputText value="#{r.correctionID}" />
	       						</h:outputLink>           					
	           				</p:column>
	           				
	           				<p:column headerText="Heading" filterBy="#{r.slogan}" filterMatchMode="contains">
	           					<p:outputLabel value="#{r.slogan}"/>
	           				</p:column>
	           				
	           				<p:column headerText="Block" filterBy="#{r.block}" filterMatchMode="contains" width="10%" style="text-align: center;">
	           					<p:outputLabel value="#{r.block}"/>
	           				</p:column>
	           				
	           				<p:column headerText="Product Number" width="10%">
	           					<p:outputLabel value="#{r.productNumber} #{r.revision}" style="text-align: center;"/>
	           				</p:column>
	           				
	           				<p:column headerText="Subsystem" filterBy="#{r.subSystem}" filterMatchMode="contains" width="10%" style="text-align: center;">
	           					<p:outputLabel value="#{r.subSystem}" style="text-align: center;" />
	           				</p:column>
	           				
	           				<p:column headerText="Impl. Instruction" width="10%">
	           					<p:commandLink update=":formTable:painelImpInst" oncomplete="PF('openImpInst').show('#{component.clientId}')" value="View">
	           						<f:setPropertyActionListener target="#{generateDumpBean.selectedRow}" value="#{r}"/>
	           					</p:commandLink>
	           				</p:column>
	           			
	           			</p:dataTable>
           			
           			</p:scrollPanel>
           			</div>
           			<p:dialog widgetVar="openImpInst" 
           				dinamic="true" 
           				showEffect="fade" 
           				hideEffect="fade" 
           				dismissable="false" 
           				showCloseIcon="true" 
           				width="450" 
           				height="500"
           				resizable="false"
           				closeOnEscape="true"
           				maximizable="true"
           				header="Implementation Instruction"	>          			
           				<p:outputPanel id="painelImpInst">
           					<h:outputLabel id="textImplInstr" value="#{generateDumpBean.selectedRow.implementationInstruction}" escape="false" />
           				</p:outputPanel>
           			</p:dialog>
           			
           			<br/>
           			
           			<p:commandButton value="Check All" actionListener="#{generateDumpBean.checkAll()}" update=":formTable:tableResult" />    
           			<p:commandButton value="Uncheck All" actionListener="#{generateDumpBean.unCheckAll()}" update=":formTable:tableResult" /> 
           			           			
           			<p:commandButton value="Add Command..." ajax="true" update=":formTable:tableResult" actionListener="#{generateDumpBean.addCommandOpen()}" >
           				<p:ajax event="dialogReturn" listener="#{generateDumpBean.onAddRow}" update=":formTable:tableResult" />
           			</p:commandButton>
           			
           			<p:commandButton value="Export..." ajax="true" actionListener="#{generateDumpBean.donwloadOptionOpen()}" update="@this">
						
					</p:commandButton>
           			
           		</h:form>
           		
           </p:layoutUnit>
       </p:layout>
    
	</h:body>
</html>