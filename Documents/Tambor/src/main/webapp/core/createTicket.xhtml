<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
       xmlns:p="http://primefaces.org/ui">
      
      <h:head>	
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />  
        <meta http-equiv="refresh" content="#{session.maxInactiveInterval};url=#{request.contextPath}/home.xhtml" />     
        <title>Tambor</title>       
        <h:outputStylesheet name="header.css" library="css" />
        <h:outputStylesheet name="style.css" library="css" />                
    </h:head> 
    <h:body>       
    	<p:layout fullPage="true" id="layout">
        	<p:layoutUnit position="north" visible="true" resizable="true" collapsible="true" >
           		<ui:insert name="header">
           			<ui:include src="/template/header.xhtml" />
           		</ui:insert>
           </p:layoutUnit>
           <p:layoutUnit position="center" visible="true" resizable="true" collapsible="true" >
           		
           		<div class="container"> 
           			<div class="headerLabel">
           				<label><b>Open a ticket</b></label>
           			</div>          		
	           		<h:form enctype="multipart/form-data" prependId="false">
	           		
	           			<p:growl id="growl" showDetail="true" life="5000" /> 
	           			
	           			<h:panelGrid id="createTicketPainel" columns="2">  
	           			         				
	           				<h:outputLabel value="Title: " for="textTitle"/>
	           				<p:inputText  id="textTitle" value="#{openTicketBean.ticket.title}" required="true" maxlength="100" style="width: 70%;" size="120" placeholder="Digit a text..."/>	           				
	           				
	           				<h:outputLabel value="Priority: " for="comboPriority"/>
	           				<p:selectOneMenu value="#{openTicketBean.ticket.priority}" required="true" id="comboPriority" >
	           				<f:selectItem itemLabel="Select the priority..." itemValue=""/>
	           					<f:selectItems value="#{openTicketBean.priority}" var="priorityItem" itemLabel="#{priorityItem}" itemValue="#{priorityItem}" />
	           				</p:selectOneMenu>	           				
	           				
	           				<h:outputLabel value="Category: " for="comboCategory" />
	           				<p:selectOneMenu value="#{openTicketBean.ticket.category}" required="true" id="comboCategory" >
	           					<f:selectItem itemLabel="Select a category..." itemValue=""/>
	           					<f:selectItems value="#{openTicketBean.category}" var="categoryItem" itemLabel="#{categoryItem.name()}" itemValue="#{categoryItem}"/>
	           				</p:selectOneMenu>	           				
	           				          				
	           				<h:outputLabel value="Area: " for="comboArea"/>
	           				<p:selectOneMenu value="#{openTicketBean.ticket.area}" required="true" id="comboArea" converter="generic">
	           					<f:selectItem itemLabel="Select a area..." itemValue=""/>
	           					<f:selectItems value="#{openTicketBean.listOfAreas}" var="areaItem" itemLabel="#{areaItem.area}" itemValue="#{areaItem}" itemDescription="#{areaItem.description}" />
	           				</p:selectOneMenu>
	           				 
	           				<h:outputLabel value="Attachment: " for="uploadFile" />
	           				<p:fileUpload value="#{openTicketBean.uploadFile}" sizeLimit="3072000" fileLimit="1" id="uploadFile" dragDropSupport="false" mode="simple" />
	           				
	           			</h:panelGrid><br/>
	           			<h:outputLabel value="Description: " for="textDescription"/><br/>
	           			<p:editor value="#{openTicketBean.ticket.description}" required="true" style="width: 750px;" maxlength="1025" id="textDescription" />
	           			<br/>
	           			<p:commandButton type="submit" process="@this" update="loginForm" ajax="false" value="Create" action="#{openTicketBean.create()}"/>           		           			
	           		</h:form>
           		</div>
           </p:layoutUnit>
       </p:layout>
	</h:body>

</html>